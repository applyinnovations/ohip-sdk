openapi: 3.0.1
info:
  contact:
    email: hospitality_apis_ww_grp@oracle.com
  description: "APIs to get Business Events generated in OPERA Cloud.<br /><br />\
    \ Compatible with OPERA Cloud release 23.2.<br /><br /><p> This document and all\
    \ content within is available under the Universal Permissive License v 1.0 (https://oss.oracle.com/licenses/upl).\
    \ Copyright (c) 2020, 2023 Oracle and/or its affiliates.</p>"
  license:
    name: UPL
    url: https://opensource.org/licenses/upl
  termsOfService: https://www.oracle.com/legal/terms.html
  title: OPERA Cloud Integration Processor API
  version: "23.2"
externalDocs:
  description: Find out more about Oracle Hospitality
  url: https://docs.oracle.com/en/industries/hospitality/integration_platforms.html
servers:
- url: /int/v1
tags:
- description: The Integration Processor Service provides a set of operations which
    help the external customers and vendors to process Business Events generated in
    OPERA.
  name: IntegrationProcessor
paths:
  /externalSystem/{extSystemCode}/businessEvents:
    get:
      description: "Business Event messages are placed in a queue. Use this API to\
        \ dequeue/fetch the Business Event messages based on the external system for\
        \ all hotels within the same chain. In order to get events, you must have\
        \ a unique consumer code for the External System and hotels. <p><strong>OperationId:</strong>getBusinessEventsByExternalSystem</p>"
      operationId: getBusinessEventsByExternalSystem
      parameters:
      - description: External system code which will be used to dequeue the events
        in: path
        name: extSystemCode
        required: true
        schema:
          maxLength: 2000
          minLength: 1
          type: string
      - description: Number of messages web service should dequeue from the BE queue.
        in: query
        name: limit
        schema:
          default: 1
          type: integer
      - description: Bearer token that needs to be passed which is generated post
          user authentication
        in: header
        name: authorization
        required: true
        schema:
          type: string
      - description: Client or Partner's Application Key
        in: header
        name: x-app-key
        required: true
        schema:
          pattern: "^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[89aAbB][a-f0-9]{3}-[a-f0-9]{12}$"
          type: string
      - description: Mandatory parameter to identify the hotel code where the end
          user is logged in
        in: header
        name: x-hotelid
        required: true
        schema:
          type: string
      - description: External system code.
        example: EXTERNALSYSTEMCODE
        in: header
        name: x-externalsystem
        schema:
          maxLength: 80
          type: string
      - description: Language code
        in: header
        name: Accept-Language
        schema:
          type: string
      responses:
        "200":
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/businessEvents'
            application/json:
              example:
                businessEventData:
                - businessEvent:
                    details:
                    - dataElement: FIRST NAME
                    - dataElement: NAME
                      newValue: Safe Travel One
                      oldValue: Safe Travel
                    - dataElement: IATA NUMBER
                      newValue: "355453"
                    - dataElement: EMAIL
                      newValue: contactus@example.com
                      oldValue: info@example.com
                    - dataElement: WEBPAGE
                    header:
                      actionId: "561139"
                      actionType: UPDATE PROFILE
                      createdDateTime: 2019-11-24 21:30:52.0
                      hotelId: HOTEL1
                      moduleName: 14
                      primaryKey: "42212"
                      publisherId: "18371"
                  businessEventId:
                    id: "1971132"
                - businessEvent:
                    details:
                    - dataElement: FIRST NAME
                      newValue: William
                    - dataElement: EMAIL YN
                      newValue: "N"
                    - dataElement: WEBPAGE
                    header:
                      actionId: "561141"
                      actionType: NEW PROFILE
                      createdDateTime: 2019-11-24 21:43:59.0
                      hotelId: HOTEL1
                      moduleName: 14
                      primaryKey: "494139"
                      publisherId: "27234"
                  businessEventId:
                    id: "1971133"
          description: Provides business event message dequeued from BE queue as response
          headers:
            Content-Language:
              description: Audience language
              schema:
                pattern: "[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*"
                type: string
        "204":
          content: {}
          description: BusinessEventsByExternalSystem not found.
        "400":
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/exceptionDetailType'
          description: Bad Request
        "401":
          content: {}
          description: Unauthorized
        "403":
          content: {}
          description: Forbidden
        "404":
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/exceptionDetailType'
          description: Resource not found
        "405":
          content: {}
          description: Method not allowed
        "406":
          content: {}
          description: Not acceptable.
        "413":
          content: {}
          description: Request Entity Too Large
        "414":
          content: {}
          description: Request URI Too Large
        "415":
          content: {}
          description: Unsupported Media Type
        "500":
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/exceptionDetailType'
          description: System Error
        "502":
          content: {}
          description: Bad Gateway
        "503":
          content: {}
          description: Service Unavailable
      summary: Get Business Events by External System
      tags:
      - IntegrationProcessor
  /externalSystem/{extSystemCode}/hotels/{hotelId}/businessEvents:
    get:
      description: "Business Event messages are placed in a queue. Use this API to\
        \ fetch(dequeue) the Business Event messages based on the External System\
        \ and Hotel ID. In order to get property specific business event messages,\
        \ you must have a unique consumer code (OPERA Cloud UI > Toolbox > External\
        \ Database) for the External System and the Hotel ID. <p><strong>OperationId:</strong>getBusinessEvents</p>"
      operationId: getBusinessEvents
      parameters:
      - description: Unique OPERA Hotel code
        in: path
        name: hotelId
        required: true
        schema:
          maxLength: 2000
          minLength: 1
          type: string
      - description: External system code which will be used to dequeue the events.
        in: path
        name: extSystemCode
        required: true
        schema:
          maxLength: 2000
          minLength: 1
          type: string
      - description: Number of messages web service should dequeue from the BE queue.
        in: query
        name: limit
        schema:
          default: 1
          type: integer
      - description: Bearer token that needs to be passed which is generated post
          user authentication
        in: header
        name: authorization
        required: true
        schema:
          type: string
      - description: Client or Partner's Application Key
        in: header
        name: x-app-key
        required: true
        schema:
          pattern: "^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[89aAbB][a-f0-9]{3}-[a-f0-9]{12}$"
          type: string
      - description: Mandatory parameter to identify the hotel code where the end
          user is logged in
        in: header
        name: x-hotelid
        required: true
        schema:
          type: string
      - description: External system code.
        example: EXTERNALSYSTEMCODE
        in: header
        name: x-externalsystem
        schema:
          maxLength: 80
          type: string
      - description: Language code
        in: header
        name: Accept-Language
        schema:
          type: string
      responses:
        "200":
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/businessEvents'
            application/json:
              example:
                businessEventData:
                - businessEvent:
                    details:
                    - dataElement: FIRST NAME
                      newValue: Jonathan
                    - dataElement: NAME
                      newValue: Smith
                    header:
                      actionId: "561141"
                      actionType: NEW PROFILE
                      createdDateTime: 2021-07-08 10:50:04.0
                      hotelId: HOTEL1
                      moduleName: Profile
                      primaryKey: "1280812"
                      publisherId: "57475"
                  businessEventId:
                    id: "1971133"
                - businessEvent:
                    details:
                    - dataElement: FIRST NAME
                      newValue: John
                      oldValue: Jonathan
                    - dataElement: MIDDLE
                      newValue: Jr
                    - dataElement: NAME
                      newValue: Smith
                      oldValue: Smith
                    - dataElement: EMAIL
                      newValue: info@example.com
                    - dataElement: PHONE NUMBER
                      newValue: "123456789"
                    - dataElement: CITY
                      newValue: LONDON
                    - dataElement: COUNTRY
                      newValue: GB
                    header:
                      actionId: "561142"
                      actionType: UPDATE PROFILE
                      createdDateTime: 2021-07-08 11:01:47.0
                      hotelId: HOTEL1
                      moduleName: Profile
                      primaryKey: "1280812"
                      publisherId: "57475"
                  businessEventId:
                    id: "1971132"
                - businessEvent:
                    details:
                    - dataElement: ACTION DATE
                      newValue: 2021-06-29
                    - dataElement: NAME
                      newValue: Smith
                    - dataElement: FIRST NAME
                      newValue: John
                    - dataElement: CONFIRMATION NO
                      newValue: "1462855"
                    - dataElement: CONFIRMATION LEG NO
                      newValue: "1"
                    - dataElement: GUEST NAME ID
                      newValue: "1280812"
                    - dataElement: RESERVATION STATUS
                      newValue: RESERVED
                    - dataElement: ARRIVAL DATE
                      newValue: 2021-07-27
                    - dataElement: LENGTH OF STAY
                      newValue: "1"
                    - dataElement: DEPARTURE DATE
                      newValue: 2021-07-28
                    - dataElement: NUMBER OF ROOMS
                      newValue: "1"
                    - dataElement: ROOM TYPE
                      newValue: DLXK
                    - dataElement: ADULTS
                      newValue: "1"
                    - dataElement: RATE CODE
                      newValue: BARRATE1
                    - dataElement: RATE AMOUNT
                      newValue: "100"
                    - dataElement: CURRENCY CODE
                      newValue: USD
                    - dataElement: SOURCE CODE
                      newValue: GSALES
                    - dataElement: MARKET CODE
                      newValue: CLI
                    - dataElement: RESERVATION TYPE
                      newValue: 4PM
                    - dataElement: RESORT
                      newValue: HOTEL1
                    header:
                      actionId: 2130690
                      actionType: NEW RESERVATION
                      createdDateTime: 2021-07-08 11:15:38.0
                      hotelId: HOTEL1
                      moduleName: Reservation
                      parentActionId: 2130689
                      primaryKey: "919074"
                      publisherId: 57489
                  businessEventId:
                    id: "2130690"
                - businessEvent:
                    details:
                    - dataElement: NAME
                      newValue: Smith
                      oldValue: Smith
                    - dataElement: FIRST NAME
                      newValue: John
                      oldValue: John
                    - dataElement: CONFIRMATION NO
                      newValue: "1515034"
                      oldValue: "1515034"
                    - dataElement: CONFIRMATION LEG NO
                      newValue: "1"
                      oldValue: "1"
                    - dataElement: GUEST NAME ID
                      newValue: "1280812"
                      oldValue: "1280812"
                    - dataElement: RESERVATION STATUS
                      newValue: CHECKED IN
                      oldValue: RESERVED
                    - dataElement: ARRIVAL DATE
                      newValue: 2021-07-27
                      oldValue: 2021-07-27
                    - dataElement: ARRIVAL TIME
                      newValue: 16:21:34
                      oldValue: 16:21:34
                    - dataElement: LENGTH OF STAY
                      newValue: "1"
                      oldValue: "1"
                    - dataElement: DEPARTURE DATE
                      newValue: 2021-07-28
                      oldValue: 2021-07-28
                    - dataElement: NUMBER OF ROOMS
                      newValue: "1"
                      oldValue: "1"
                    - dataElement: ROOM TYPE
                      newValue: DLXK
                      oldValue: DLXK
                    - dataElement: ROOM
                      newValue: "123458"
                      oldValue: "123458"
                    - dataElement: ADULTS
                      newValue: "1"
                      oldValue: "1"
                      scopeFrom: 2021-07-27
                      scopeTo: 2021-07-28
                    - dataElement: RATE AMOUNT
                      newValue: "100"
                      oldValue: "100"
                      scopeFrom: 2021-07-27
                      scopeTo: 2021-07-28
                    - dataElement: RATE CODE
                      newValue: BARRATE1
                      oldValue: BARRATE1
                      scopeFrom: 2021-07-27
                      scopeTo: 2021-07-28
                    header:
                      actionId: 2240137
                      actionType: UPDATE RESERVATION
                      createdDateTime: 2021-07-08 11:35:36.0
                      hotelId: HOTEL1
                      moduleName: Reservation
                      parentActionId: 2240136
                      primaryKey: "934171"
                      publisherId: 57491
                  businessEventId:
                    id: "2240137"
          description: Provides business event message dequeued from BE queue as response
          headers:
            Content-Language:
              description: Audience language
              schema:
                pattern: "[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*"
                type: string
        "204":
          content: {}
          description: BusinessEvents not found.
        "400":
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/exceptionDetailType'
          description: Bad Request
        "401":
          content: {}
          description: Unauthorized
        "403":
          content: {}
          description: Forbidden
        "404":
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/exceptionDetailType'
          description: Resource not found
        "405":
          content: {}
          description: Method not allowed
        "406":
          content: {}
          description: Not acceptable.
        "413":
          content: {}
          description: Request Entity Too Large
        "414":
          content: {}
          description: Request URI Too Large
        "415":
          content: {}
          description: Unsupported Media Type
        "500":
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/exceptionDetailType'
          description: System Error
        "502":
          content: {}
          description: Bad Gateway
        "503":
          content: {}
          description: Service Unavailable
      summary: Get Business Events by External System and Hotel ID
      tags:
      - IntegrationProcessor
components:
  schemas:
    businessEventDataType:
      properties:
        businessEvent:
          $ref: '#/components/schemas/businessEventType'
        businessEventId:
          $ref: '#/components/schemas/businessEventIDType'
      type: object
    businessEventDetailType:
      properties:
        dataElement:
          description: "Name of the data element, such as arrival date, departure\
            \ date, etc."
          type: string
        elementRole:
          description: "Element role used to correlate fields of each record, when\
            \ a collection of records is represented, such as phone role for phones."
          type: string
        elementSequence:
          description: "Sequence number used to correlate fields of each record, when\
            \ a collection of records is represented."
          type: integer
        elementType:
          description: "Element type used to correlate fields of each record, when\
            \ a collection of records is represented, such as phone type for phones."
          type: string
        newValue:
          description: "Value of the element after this action took place. In case\
            \ of date values, format used is YYYY-MM-DD."
          type: string
        oldValue:
          description: "Value of the element when this action took place. In case\
            \ of date values, format used is YYYY-MM-DD."
          type: string
        scopeFrom:
          description: "Begin date from when this value is applicable, such as daily\
            \ element date, block grid date etc."
          format: date
          type: string
        scopeTo:
          description: "End date till when this value is applicable, such as daily\
            \ element date, block grid date etc."
          format: date
          type: string
      type: object
    businessEventDetailsType:
      items:
        $ref: '#/components/schemas/businessEventDetailType'
      maxItems: 4000
      type: array
    businessEventHeaderType:
      properties:
        actionId:
          description: "Unique action instance id of the business event, uniqueness\
            \ is guaranteed intra-module only."
          type: number
        actionType:
          description: "Business event action type, such as new reservation, update\
            \ profile, etc."
          type: string
        createdDateTime:
          description: Timestamp of the business event.
          pattern: "/([0-9]{4})-(?:[0-9]{2})-([0-9]{2}) ([0-9]{2}):([0-9]{2}):([0-9]{2}).([0-9]+)/"
          type: string
        hotelId:
          description: The property this business event is associated with.
          maxLength: 20
          minLength: 0
          type: string
        moduleName:
          $ref: '#/components/schemas/businessEventModuleType'
        parentActionId:
          description: "Action instance id of the parent business event, if the action\
            \ triggered this event was a side effect of another action."
          type: number
        primaryKey:
          description: "Primary key value of the business event, such as resv name\
            \ id, allotment header id, name id etc."
          type: string
        publisherId:
          description: Internal id of the application or system user that triggered
            this event.
          type: number
      type: object
    businessEventIDType:
      description: "An identifier used to uniquely reference an object in a system\
        \ (e.g. an airline reservation reference, customer profile reference, booking\
        \ confirmation number, or a reference to a previous availability quote)."
      properties:
        id:
          description: A unique identifying value assigned by the creating system.
            The ID attribute may be used to reference a primary-key value within a
            database or in a particular implementation.
          maxLength: 80
          minLength: 0
          type: string
        idContext:
          description: "Used to identify the source of the identifier (e.g., IATA,\
            \ ABTA)."
          maxLength: 80
          minLength: 0
          type: string
        type:
          description: A reference to the type of object defined by the UniqueID element.
          maxLength: 20
          minLength: 0
          type: string
      type: object
    businessEventModuleType:
      enum:
      - Activity
      - Availability
      - Block
      - BlockOffsets
      - Cashiering
      - Catering
      - CateringNotes
      - Configuration
      - ECertificate
      - Enrollment
      - Housekeeping
      - MrEnrollment
      - NightAudit
      - OwnerContract
      - Profile
      - Rate
      - Reservation
      - StayRecords
      type: string
    businessEventType:
      properties:
        details:
          $ref: '#/components/schemas/businessEventDetailsType'
        header:
          $ref: '#/components/schemas/businessEventHeaderType'
      type: object
    businessEvents:
      description: Provides business event message dequeued from BE queue as response
      properties:
        businessEventData:
          description: List of BusinessEvents dequeued for given external system
          items:
            $ref: '#/components/schemas/businessEventDataType'
          type: array
        links:
          items:
            $ref: '#/components/schemas/instanceLink'
          type: array
        warnings:
          $ref: '#/components/schemas/warningsType'
      type: object
    errorInstance:
      description: Complex type that contains error instance details for a REST call.
      properties:
        detail:
          description: Human-readable description specific to this occurrence of the
            problem.
          type: string
        instance:
          description: Absolute URI that identifies the specific occurrence of the
            problem.  It may or may not provide additional information if dereferenced.
          type: string
        o:errorCode:
          description: "Application error code, which is different from HTTP error\
            \ code."
          type: string
        o:errorPath:
          description: Path to the problem at the resource or property level.
          type: string
        status:
          description: "HTTP status code for this occurrence of the problem, set by\
            \ the origin server."
          type: integer
        title:
          description: "Short, human-readable summary of the problem.  The summary\
            \ SHOULD NOT change for subsequent occurrences of the problem, except\
            \ for purposes of localization."
          type: string
        type:
          description: "Absolute URI [RFC3986] that identifies the problem type. \
            \ When dereferenced, it SHOULD provide a human-readable summary of the\
            \ problem (for example, using HTML)."
          type: string
      required:
      - title
      - type
      title: Error Instance Details
      type: object
    exceptionDetailType:
      description: Complex type that contains error details for a REST call.
      properties:
        detail:
          description: Human-readable description specific to this occurrence of the
            problem.
          type: string
        instance:
          description: Absolute URI that identifies the specific occurrence of the
            problem.  It may or may not provide additional information if dereferenced.
          type: string
        links:
          $ref: '#/components/schemas/links'
        o:errorCode:
          description: "Application error code, which is different from HTTP error\
            \ code."
          type: string
        o:errorDetails:
          description: "Details of the error message, consisting of a hierarchical\
            \ tree structure."
          items:
            $ref: '#/components/schemas/errorInstance'
          type: array
        o:errorPath:
          description: Path to the problem at the resource or property level.
          type: string
        status:
          description: "HTTP status code for this occurrence of the problem, set by\
            \ the origin server."
          type: integer
        title:
          description: "Short, human-readable summary of the problem.  The summary\
            \ SHOULD NOT change for subsequent occurrences of the problem, except\
            \ for purposes of localization."
          type: string
        type:
          description: "Absolute URI [RFC3986] that identifies the problem type. \
            \ When dereferenced, it SHOULD provide a human-readable summary of the\
            \ problem (for example, using HTML)."
          type: string
      required:
      - title
      - type
      title: Error Detail
      type: object
    instanceLink:
      description: Metadata describing link description objects that MAY appear in
        the JSON instance representation.
      properties:
        href:
          description: "URI [RFC3986] or URI Template [RFC6570]. If the value is set\
            \ to URI Template, then the \"templated\" property must be set to true."
          type: string
        method:
          description: HTTP method for requesting the target of the link.
          enum:
          - GET
          - POST
          - PUT
          - DELETE
          - PATCH
          - OPTIONS
          - HEAD
          type: string
        operationId:
          description: "The operationId of the path you can call to follow this link.\
            \  This allows you to look up not only the path and method, but the description\
            \ of that path and any parameters you need to supply."
          type: string
        rel:
          description: "Name of the link relation that, in addition to the type property,\
            \ can be used to retrieve link details. For example, href or profile."
          type: string
        targetSchema:
          description: "Link to the metadata of the resource, such as JSON-schema,\
            \ that describes the resource expected when dereferencing the target resource.."
          type: string
        templated:
          default: false
          description: "Boolean flag that specifies that \"href\" property is a URI\
            \ or URI Template. If the property is a URI template, set this value to\
            \ true. By default, this value is false."
          type: boolean
        title:
          description: Exact copy of the "summary" field on the linked operation.
          type: string
      required:
      - href
      - method
      - operationId
      - rel
      type: object
    links:
      items:
        $ref: '#/components/schemas/instanceLink'
      type: array
    warningType:
      description: Used when a message has been successfully processed to report any
        warnings or business errors that occurred.
      properties:
        code:
          description: "If present, this refers to a table of coded values exchanged\
            \ between applications to identify errors or warnings."
          maxLength: 20
          minLength: 0
          type: string
        docURL:
          description: "If present, this URL refers to an online description of the\
            \ error that occurred."
          maxLength: 2000
          type: string
        language:
          description: Language identification.
          pattern: "[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*"
          type: string
        recordId:
          description: "If present, this attribute allows for batch processing and\
            \ the identification of the record that failed amongst a group of records.\
            \ This value may contain a concatenation of a unique failed transaction\
            \ ID with specific record(s) associated with that transaction."
          maxLength: 2000
          type: string
        rph:
          description: Reference Place Holder used as an index for this warning.
          maxLength: 8
          minLength: 1
          type: string
        shortText:
          description: An abbreviated version of the error in textual format.
          maxLength: 2000
          type: string
        status:
          description: "If present, recommended values are those enumerated in the\
            \ ErrorRS, (NotProcessed Incomplete Complete Unknown) however, the data\
            \ type is designated as string data, recognizing that trading partners\
            \ may identify additional status conditions not included in the enumeration."
          maxLength: 2000
          type: string
        tag:
          description: "If present, this attribute may identify an unknown or misspelled\
            \ tag that caused an error in processing. It is recommended that the Tag\
            \ attribute use XPath notation to identify the location of a tag in the\
            \ event that more than one tag of the same name is present in the document.\
            \ Alternatively, the tag name alone can be used to identify missing data\
            \ [Type=ReqFieldMissing]."
          maxLength: 2000
          type: string
        type:
          description: The Warning element MUST contain the Type attribute that uses
            a recommended set of values to indicate the warning type. The validating
            XSD can expect to accept values that it has NOT been explicitly coded
            for and process them by using Type ="Unknown".
          maxLength: 20
          minLength: 0
          type: string
        value:
          description: Property Value
          type: string
      type: object
    warningsType:
      description: Used in conjunction with the Success element to define a business
        error.
      items:
        $ref: '#/components/schemas/warningType'
      maxItems: 4000
      type: array
x-original-swagger-version: "2.0"
